#!/bin/sh
#
# Checks if a command is being launched from a tty
# or not (e.g. from dmenu/rofi - an application launcher)
# If its being launched from a tty, run it as normal,
# else open a new terminal window and run it there
#
# Check if we're on mac/linux to use mac-alacritty
# (wrapper with different --config-file
# or just alacritty

if [ "$(tty)" = "not a tty" ]; then
	# open a new terminal, load zsh configuration (for zsh functions/environment), then launch the passed command
	case "$ON_OS" in
		linux)
			alacritty -e zsh -ic "$@"
			;;
		mac)
			mac-alacritty -e zsh -ic "$@"
			;;
		android)
			# just run the command directly on android
			sh -c "$@"
			;;
	esac
else
	# execute the command in the current shell
	sh -c "$@"
fi
