# fuzzy search for files/directories and open that in nvim
# If a file is chosen, cd's to that dir and opens the file
# If a dir is chosen, cd's there

function fzfedit() {
  local chosen_file
  local enclosing_dir
  chosen_file="$(fd --full-path -L -H | fzf +m --preview='${HOME}/.config/fzf_preview {}')"
  if [ -d "$chosen_file" ]; then
    cd "$chosen_file"
    zle reset-prompt
  else
    enclosing_dir=`dirname "$chosen_file"`
    chosen_file=`basename "$chosen_file"`
    cd "$enclosing_dir"
    zle reset-prompt
    $EDITOR "$chosen_file"
  fi
}

